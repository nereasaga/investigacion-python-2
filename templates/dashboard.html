{% extends 'base.html' %}

{% block title %}Dashboard{% endblock %}

{% block content %}
    <h1>Dashboard</h1>
    <div class="dashboard-content">
        <h2>Bienvenido, {{ current_user.username }}</h2>
        
        <div class="profile-section">
            <h3>Tu Perfil</h3>
            <form method="POST" class="profile-form">
                <div class="form-group">
                    <label for="bio">Biografía:</label>
                    <textarea name="bio" id="bio" rows="4">{{ profile.bio if profile else '' }}</textarea>
                </div>
                
                <div class="form-group">
                    <label for="movie_id">Película Favorita:</label>
                    <select name="movie_id" id="movie_id">
                        <option value="">Selecciona una película</option>
                        {% for movie in movies %}
                            <option value="{{ movie.id }}" 
                                {% if profile and profile.movie_id == movie.id %}selected{% endif %}>
                                {{ movie.title }} ({{ movie.year }})
                            </option>
                        {% endfor %}
                    </select>
                </div>

                <button type="submit" class="button">Guardar Perfil</button>
            </form>
        </div>

        <div class="current-profile">
            {% if profile %}
                <h3>Tu Perfil Actual</h3>
                <p><strong>Biografía:</strong> {{ profile.bio }}</p>
                <p><strong>Película Favorita:</strong> {{ profile.movie_title }}</p>
            {% endif %}
        </div>

        <div class="dashboard-actions">
            <h3>Acciones Rápidas</h3>
            <ul>
                <li><a href="{{ url_for('list_users_view') }}">Ver lista de usuarios</a></li>
                <li><a href="{{ url_for('add_user_view') }}">Añadir nuevo usuario</a></li>
            </ul>
        </div>
    </div>
{% endblock %}
